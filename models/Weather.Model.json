{"version":"2.0","models":[{"Key":"16","Name":"Weather","Definition":{"version":"v2","attributes":[],"flows":{"blocks":[{"title":"Action","type":"actionstart","id":"43fa1fea-c2a7-43ff-a685-dd3e26e1a8c8","position":{"left":60,"top":60},"surface":"GetForecast","connections":{"inputs":[],"outputs":[{"source":"43fa1fea-c2a7-43ff-a685-dd3e26e1a8c8:output:location","target":"7e303b0e-a872-408a-c103-ed99a727e0a6:input:Address"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"location","type":"","label":"location","description":"","documentation":"","example":"","dataType":""}],"actionName":"GetForecast","initiate":false,"published":false,"debug":false,"roles":[],"static":true,"canOverrideCredentials":false,"docs":""},{"title":"Lookup Geo Location","type":"callwebservice:Here.com:Lookup Geo Location","id":"7e303b0e-a872-408a-c103-ed99a727e0a6","position":{"left":198,"top":377},"surface":"GetForecast","connections":{"inputs":[{"source":"43fa1fea-c2a7-43ff-a685-dd3e26e1a8c8:output:location","target":"7e303b0e-a872-408a-c103-ed99a727e0a6:input:Address"}],"outputs":[{"source":"7e303b0e-a872-408a-c103-ed99a727e0a6:output:Latitude","target":"ba683afa-9bb2-4b94-8a4f-651fd543e4ad:input:Latitude"},{"source":"7e303b0e-a872-408a-c103-ed99a727e0a6:output:Longitude","target":"ba683afa-9bb2-4b94-8a4f-651fd543e4ad:input:Longitude"}]},"inputValues":[{"id":"Address","type":"","label":"Address","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"AccountName","type":"text","label":"Account","value":"#{model.hereaccount}","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"Country Code","type":"","label":"Country Code","description":"","documentation":"","example":"","dataType":""},{"id":"Country","type":"","label":"Country","description":"","documentation":"","example":"","dataType":""},{"id":"Postal Code","type":"","label":"Postal Code","description":"","documentation":"","example":"","dataType":""},{"id":"Latitude","type":"","label":"Latitude","description":"","documentation":"","example":"","dataType":""},{"id":"Longitude","type":"","label":"Longitude","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""}],"timeout":5000},{"title":"Output","type":"actionoutput","id":"18ae7e8e-d5e4-415e-9dc6-48e5f2a6e5b3","position":{"left":846,"top":355},"surface":"GetForecast","connections":{"inputs":[{"source":"0f816767-6cfc-43dd-d78f-1d50f0e6a629:output:forecast","target":"18ae7e8e-d5e4-415e-9dc6-48e5f2a6e5b3:input:input"}],"outputs":[]},"inputValues":[{"id":"input","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[],"fieldName":""},{"title":"ES6Javascript","type":"es6javascript","id":"0f816767-6cfc-43dd-d78f-1d50f0e6a629","position":{"left":879,"top":112},"surface":"GetForecast","connections":{"inputs":[{"source":"ba683afa-9bb2-4b94-8a4f-651fd543e4ad:output:daily","target":"0f816767-6cfc-43dd-d78f-1d50f0e6a629:input:forecast"}],"outputs":[{"source":"0f816767-6cfc-43dd-d78f-1d50f0e6a629:output:forecast","target":"18ae7e8e-d5e4-415e-9dc6-48e5f2a6e5b3:input:input"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"forecast","type":"","label":"forecast","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"forecast","type":"","label":"forecast","description":"","documentation":"","example":"","dataType":""}],"description":"","code":"//https://openweathermap.org/weather-conditions#Weather-Condition-Codes-2\nfunction getStatus(status) {\n    switch(status) {\n        default: return 'sun';\n        case 'thunderstorm': return 'lightning';\n        case 'drizzle':return 'drizzle';\n        case 'rain':return 'rain';\n        case 'snow':return 'snow';\n        case 'mist':return 'cloudy';\n        case 'smoke':return 'cloudy';\n        case 'haze':return 'cloudy';\n        case 'dust':return 'cloudy';\n        case 'fog':return 'cloudy';\n        case 'sand':return 'cloudy';\n        case 'ash':return 'cloudy';\n        case 'squall':return 'cloudy';\n        case 'tornado':return 'lightning';\n        case 'clear':return 'sun';\n        case 'clouds':return 'cloudy';\n    }\n}\nruntime.done({forecast:runtime.inputs().forecast.map(item=>{\n    return {\n        temperature: item.temp.day - 273.15,\n        status:getStatus(item.weather[0].main.toLowerCase())\n    }\n})});","timeoutMilliseconds":5000},{"title":"Weather Forecast For Position","type":"callwebservice:Open Weather:Weather Forecast For Position","id":"ba683afa-9bb2-4b94-8a4f-651fd543e4ad","position":{"left":495,"top":96},"surface":"GetForecast","connections":{"inputs":[{"source":"7e303b0e-a872-408a-c103-ed99a727e0a6:output:Latitude","target":"ba683afa-9bb2-4b94-8a4f-651fd543e4ad:input:Latitude"},{"source":"7e303b0e-a872-408a-c103-ed99a727e0a6:output:Longitude","target":"ba683afa-9bb2-4b94-8a4f-651fd543e4ad:input:Longitude"}],"outputs":[{"source":"ba683afa-9bb2-4b94-8a4f-651fd543e4ad:output:daily","target":"0f816767-6cfc-43dd-d78f-1d50f0e6a629:input:forecast"}]},"inputValues":[{"id":"Longitude","type":"","label":"Longitude","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"Latitude","type":"","label":"Latitude","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"AccountName","type":"text","label":"Account","value":"#{model.weatheraccount}","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"current","type":"","label":"current","description":"","documentation":"","example":"","dataType":""},{"id":"hourly","type":"","label":"hourly","description":"","documentation":"","example":"","dataType":""},{"id":"daily","type":"","label":"daily","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""}],"timeout":5000}],"position":{"top":0,"left":0}},"sources":[{"name":"GetForecast","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[""],"parameters":["location"]}],"actions":[{"name":"GetForecast","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[""],"parameters":["location"]}],"uioptions":{}},"UIDefinition":null,"MetadataDictionary":"{\"title\":\"Weather Widget Data\",\"description\":\"Provides forecast data for the weather widget\",\"parameters\":[{\"id\":\"weatheraccount\",\"label\":\"OpenWeatherMap Account\",\"type\":\"wsaccount\",\"subtype\":\"Open Weather\"},{\"id\":\"hereaccount\",\"label\":\"Here.com Account\",\"type\":\"wsaccount\",\"subtype\":\"Here.com\"}],\"tags\":[\"weather\"],\"capabilities\":[]}","ApiRoutes":[],"JSModules":[],"ModelCollections":[]}]}